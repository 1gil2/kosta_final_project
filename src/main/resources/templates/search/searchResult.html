<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{/layout/layoutUser}">
<head>
<meta charset="UTF-8">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" />
<th:block layout:fragment="script1">
	<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
	<script
		src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
	<title>Insert title here</title>
	<script th:src="@{/js/tablesort.js}"></script>
	<link rel="stylesheet" type="text/css"
		href="//cdn.datatables.net/1.10.10/css/jquery.dataTables.min.css">
	<script>
		$(function() {
			$("table").addClass(
					"table table-striped table-bordered table-hover");
			$("table").attr("id", "tablesort");
			$("#tablesort").dataTable();
		});
	</script>
	<script>
		$(function() {
			var formObj = $(".form2");

			$(".searchBtn2").click(function() {
				var keyword = $(".searchKeyword2").val();

				formObj.find("[name='keyword']").val(keyword);
				formObj.submit();
			});

		});

		$(function() {
			var formObj = $(".form2");

			$("#sub .smenu").click(function() {

				subNo = $(this).attr("value");

				$("#sub .smenu").each(function(idx, item) {
					$(item).removeClass('active');
				});

				$("#sub .smenu").each(function(idx, item) {
					if ($(item).val() == subNo) {
						$(item).addClass('active');
					}
				});

				$.ajax({
					url : "searchSubject",
					data : {
						"subNo" : $(this).attr("value"),
						"keyword" : "[[${word}]]"
					},
					method : "get",
					success : function(response) {
						$("#table_content").html(response);
					}
				});
			});
		});

		$(function() {
			var formObj = $(".form2");

			$(".space .hmenu").click(function() {
				
				hallNo = $(this).attr("value");
				
				$(".space .hmenu").each(function(idx, item) {
					$(item).removeClass('active');
				});

				$(".space .hmenu").each(function(idx, item) {
					if ($(item).val() == hallNo) {
						$(item).addClass('active');
					}
				});

				$.ajax({
					url : "searchHall",
					data : {
						"subNo" : "[[${subNo}]]",
						"lecHallNo" : hallNo,
						"keyword" : "[[${word}]]"
					},
					method : "get",
					success : function(response) {
						$("#final_content").html(response);
					}
				});
			});
		});
	</script>

</th:block>
<th:block layout:fragment="style1">
	<style>
#sub ul li {
	display: inline-block;
	width: 120px;
	color: #2F55AA;
	border: 2.5px solid #2F55AA;
}

#sub ul li:hover {
	background-color: #2F55AA;
	color: white;
}

#sub a {
	display: block;
}

.space ul li {
	display: inline-block;
	width: 120px;
	color: #2F55AA;
	border: 2.5px solid #2F55AA;
}

.space ul li:hover {
	background-color: #2F55AA;
	color: white;
}

.space a {
	display: block;
}
</style>
</th:block>
</head>
<body>
	<div layout:fragment="content1">
		<div>
			<input type="text" class="searchKeyword2" th:value=${word}>
			<button class="searchBtn2">검색</button>
		</div>

		<form class="form2" th:action="@{/search/searchResult}" method="get">
			<input type="hidden" name="keyword" value="">

		</form>


		<hr>

		<div id="sub">
			<span>주제명</span>
			<th:block th:each="subject:${sublist}">
				<button type="button" class="smenu btn btn-default"
					th:text="${subject.subName}" th:value="${subject.subjectNo}"></button>
			</th:block>
		</div>

		<hr>

		<div id="table_content">
			<div class="space">
				<span>강의장</span>
				<th:block th:each="hall:${hlist}">
					<button type="button" class="hmenu btn btn-default"
						th:text="${hall.lectureHallName}" th:value="${hall.lectureHallNo}"></button>
				</th:block>
			</div>

			<hr>

			<div id="final_content">
				<table>
					<thead>
						<tr>
							<th>과정명</th>
							<th>개강일</th>
							<th>종강일</th>
							<th>교육시간</th>
							<th>강의장</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="class:${result}">
							<td><a th:href="@{'/course/enroll/'+${class.classNo}}"
								th:text=${class.lecture.course.courseName}></a></td>
							<td th:text=${class.classOpenDate}></td>
							<td th:text=${class.classCloseDate}></td>
							<td th:text=${class.educationTime.educationTimeType}></td>
							<td th:text=${class.classRoom.lectureHall.lectureHallName}></td>
						</tr>
					</tbody>
				</table>
			</div>

		</div>

	</div>
</body>
</html>