<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{/layout/layoutUser}">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<div layout:fragment="content1">
<ul class="nav nav-tabs">
  <li class="active"><a class="btn-link" href="/user/userInfo">
    <i class="fa fa-user text-info"></i> 회원정보</a></li>
  <li><a class="btn-link" href="/user/userInfo">
    <i class="fa fa-id-card-o text-success"></i> 수강현황</a></li>
</ul>

<div class="tab-content tab-pane">
<div class="row">
    <div class="col-md-12">
        <div class="hpanel">
            <div class="panel-body">
                
<div class="row">
  <div class="col-md-12">
    <div class="hpanel text-right">
      <a herf="#" class="btn btn-outline btn-info" data-toggle="modal" role="button" data-target="#passwordModifyrModal"><i class="fa fa-address-book-o"></i><span class="hidden-xs">&nbsp;비밀번호 변경</span></a>
    </div>
  </div>
</div>


<form action="/profile/update" method="POST" enctype="multipart/form-data" id="updateForm" novalidate="novalidate">
    
  <div class="panel-group" id="accordion">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h4 class="panel-title">
          <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
          기본정보<span class="caret"></span>
          </a>
        </h4>
      </div>
      <div id="collapseOne" class="panel-collapse collapse in">
  
  <!-- 개인정보 수정 -->
  <div class="panel-body">
    <div class="form-group cust-form has-feedback ">
      <label for="userId" class="control-label">
        아이디 
        <span class="help-inline">*</span>
      </label>
      
      <input type="text" id="userId" name="userId" value="${user.userId}" class="form-control" readonly="readonly">
      <span class="help-block"></span>
    </div>

    <div class="form-group cust-form has-feedback ">
      <label for="name" class="control-label">
        이름
        <span class="help-inline">*</span>
      </label>
      <input type="text" id="name" name="name" value=${user.userName} class="form-control">
      <span class="help-block"></span>
    </div>
    
    <div class="form-group cust-form has-feedback ">
      <label for="sex" class="control-label">
        성별
        <span class="help-inline">*</span>
      </label>
      <span class="buttonset" id="sex">
        <input type="radio" id="sex_true" name="sex" value="true" checked="checked" class="radio-inline">
        <label for="sex_true">남</label>
      
        <input type="radio" id="sex_false" name="sex" value="false" class="radio-inline">
        <label for="sex_false">여</label>
      </span>
      <span class="help-block"></span>
    </div>
    
    <div class="form-group cust-form has-feedback ">
      <label for="birthDate" class="control-label">
        생년월일
        <span class="help-inline">*</span>
      </label>
      <input type="date" id="birthDate" name="userBirth" value="${user.userBirth}" class="form-control">
      <span class="help-block"></span>
    </div>

    <div class="row">
      <div class="col-md-2">
        <div class="form-group has-feedback ">
          <label for="zipCode" class="control-label">
            우편번호
            <span class="help-inline">*</span>
          </label>
          <input type="text" id="zipCode" name="zipCode" value="${user.zipCode}" class="form-control " readonly="readonly">
          <span class="help-block"></span>
        </div>
      </div>
      <div class="col-md-4">
        <div class="form-group has-feedback ">
          <label for="address" class="control-label">
            주소
            <span class="help-inline">*</span>
          </label>
          <input type="text" id="address" name="userAddress" value="${user.userAddress}" class="form-control " readonly="readonly">
          <span class="help-block"></span>
        </div>
      </div>
      <div class="col-md-4">
        <div class="form-group has-feedback ">
          <label for="detailAddress" class="control-label">
            상세주소
            <span class="help-inline">*</span>
          </label>
          <input type="text" id="detailAddress" name="detailAddress" value="${user.detailAddress}" class="form-control ">
          <span class="help-block"></span>
        </div>
      </div>
      <div class="form-group has-feedback col-md-1">
        <button type="button" id="searchAddress" class="btn btn-default" style="margin-top: 24px;">주소찾기</button>
      </div>
    </div>

<!-- 우편번호 검색 처리하기 -->
<!-- <script type="text/javascript">

/* $(document).ready(function() {
    console.log("Start jquery");
    $("#searchAddress").click(function(){
        new daum.Postcode({
            oncomplete: function(data) {
                $("#address").val(data.address + data.buildingName);
                $("#zipCode").val(data.zonecode);
            }
        }).open();
    });
}); */
</script> -->

    <div class="form-group cust-form has-feedback ">
      <label for="cellPhone" class="control-label">
        휴대전화 번호
        <span class="help-inline">*</span>
      </label>
      <input type="text" id="cellPhone" name="cellPhone" value="01046903419" class="form-control">
      <span class="help-block"></span>
    </div>
    
    <div class="row">
      <div class="col-md-10">
        <div class="form-group cust-form has-feedback ">
          <label for="email" class="control-label">
            이메일
            <span class="help-inline">*</span>
          </label>
          <input type="text" id="email" name="email" value="buchonsi@naver.com" class="form-control" readonly="readonly">
          <span class="help-block"></span>
        </div>
      </div>
      <div class="col-md-2">
        <button class="btn btn-default" type="button" data-toggle="collapse" style="margin-top: 24px;" data-target="#emailAuthbox" aria-expanded="false" aria-controls="emailAuthbox">이메일 변경</button>
      </div>
    </div>
    <!-- 이메일 인증번호 -->
    <div class="collapse" id="emailAuthbox" aria-expanded="false">
      <div class="col-md-12 well well-lg">
        <div class="form-group ng-scope" ng-modules="emailauth" ng-controller="emailAuthController">
          <div class="col-lg-6">
            <div id="emailauth" class=" input-group">
              <div class="form-group cust-form has-feedback ">
                <label for="authemail" class="control-label">
                이메일
                <span class="help-inline"></span>
                </label>
                <input type="text" id="authemail" name="authemail" ng-readonly="isSendemail" ng-model="email" placeholder="ex) user@kosta.or.kr" class="form-control ng-pristine ng-untouched ng-valid ng-empty" ng-value="email">
                <span class="help-block"></span>
              </div>
              <span class="kt-pl-30 input-group-btn"><button type="button" id="emailSendBtn" class="ladda-button btn btn-default" ng-click="sendEmail()" ng-disabled="isSendemail" style="margin-top: 24px;">인증번호발송</button></span>
            </div>
          </div>
          <div class="col-lg-6">
            <div id="emailauth" class=" input-group">
              <div class="form-group cust-form">
                <label for="authNum" class="control-label">인증번호<code class="help-inline ng-binding">(03:00)</code></label>
                <input type="text" id="authNum" name="authNum" class="form-control ng-pristine ng-untouched ng-valid ng-empty" placeholder="인증번호를 입력해 주세요." ng-model="authNum" ng-value="authNum" ng-disabled="isAuthNum" disabled="disabled">    
              </div>
              <span class="kt-pl-30 input-group-btn"><button type="button" id="authSendBtn" class="ladda-button btn btn-default" ng-click="eamilConfirm()" ng-disabled="isAuthNum" style="margin-top: 24px;" disabled="disabled">인증</button></span>
            </div>
          </div>
        </div>
        <script src="/assets/scripts/helper/emailauth.js" type="text/javascript"></script>
      </div>
    </div>
 <!-- 인서트하고 다시오기 ----------------------------------------------------------------- -->   
    <div class="form-group cust-form has-feedback ">
      <label for="bank" class="control-label">
        
          은행
        
        <span class="help-inline"></span>
      </label>
      
    <input type="text" id="bank" name="bank" value="" class="form-control" placeholder="ex) 한국은행">

      <span class="help-block"></span>
      
    </div>

    <div class="form-group cust-form has-feedback ">
      <label for="bankAccount" class="control-label">
          계좌번호
        <span class="help-inline"></span>
      </label>
    <input type="text" id="bankAccount" name="bankAccount" value="" class="form-control" placeholder="ex) 111111111111 -없이">
      <span class="help-block"></span>
    </div>
                          <div class="row">
                            <div class="col-md-12">
                              <div class="form-group cust-form has-feedback ">
                                <label for="ssn" class="control-label">
                                  주민번호
                                  <span class="help-inline"></span>
                                </label>
                                <div class="row">
                                  <div class="col-md-3">
                                    <input type="text" id="ssn1" name="ssn1" value="" class="form-control" maxlength="6">
                                  </div>
                                  <div class="col-md-3">
                                    <input type="password" id="ssn2" name="ssn2" value="" class="form-control" maxlength="7">
                                  </div>
                                </div>
                                <span class="help-block"></span>
                              </div>
                            </div>
                          </div>
    <div class="form-group cust-form has-feedback ">
      <label for="avatar" class="control-label">
          아바타 이미지
        <span class="help-inline"></span>
      </label>
    <input type="file" id="avatar" name="avatar" class="form-control">
      <span class="help-block"></span>
    </div>

                          <div class="kt-mb-20">
                              <img src="data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%22300%22%20height%3D%22200%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20300%20200%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%23holder_17a2c3fb670%20text%20%7B%20fill%3A%23AAAAAA%3Bfont-weight%3Abold%3Bfont-family%3AArial%2C%20Helvetica%2C%20Open%20Sans%2C%20sans-serif%2C%20monospace%3Bfont-size%3A15pt%20%7D%20%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_17a2c3fb670%22%3E%3Crect%20width%3D%22300%22%20height%3D%22200%22%20fill%3D%22%23EEEEEE%22%3E%3C%2Frect%3E%3Cg%3E%3Ctext%20x%3D%22111.0234375%22%20y%3D%22106.721875%22%3E300x200%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E" class="img-thumbnail" data-src="holder.js/300x200" alt="300x200" style="width: 300px; height: 200px;" data-holder-rendered="true">
                          </div>
                        </div>
                      </div>
                    </div>
                    
                    <div class="panel panel-default">
                      <div class="panel-heading">
                        <h4 class="panel-title">
                          <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                          회사정보<span class="caret"></span>
                          </a>
                        </h4>
                      </div>
                      <div id="collapseTwo" class="panel-collapse collapse">
                        <div class="panel-body">

<div class="row ng-scope" ng-modules="corpApp" ng-controller="corpController">
  <div class="col-md-3">
    <div class="form-group has-feedback kt-mb-0">
          <label for="corpName" class="control-label">
              소속회사
        </label>
        <input type="text" name="corporateName" ng-init="corpName=''" value="" ng-model="corpName" ng-value="corpName" class="form-control ng-pristine ng-untouched ng-valid ng-empty" readonly="readonly">
      </div>
    <input type="hidden" name="corporateId" ng-init="corpId=''" value="" ng-model="corpId" ng-value="corpId" autocomplete="off" class="ng-pristine ng-untouched ng-valid ng-empty">
    </div>
    <div class="col-md-3">
      <button type="button" id="searchCorp" class="btn btn-default" style="margin-top: 24px;" data-toggle="modal" role="button" data-target="#corpModal">회사검색</button>
      <button type="button" id="initBtn" class="btn btn-outline btn-danger" style="margin-top: 24px;" ng-click="initCorp()"><i class="fa fa-remove"></i><span class="hidden-xs">&nbsp;삭제</span></button>
    </div>

  <!-- Modal -->
</div>
<span class="help-block kt-mb-15">회사를 추가하거나 삭제하고 저장버튼을 눌러야 반영됩니다.</span>
<script src="/assets/scripts/helper/modalcorplist.js" type="text/javascript"></script>

    <div class="form-group cust-form has-feedback ">
      <label for="department" class="control-label">
          소속부서
        <span class="help-inline"></span>
      </label>
    <input type="text" id="department" name="department" value="" class="form-control">
      <span class="help-block"></span>
    </div>

    <div class="form-group cust-form has-feedback ">
      <label for="position" class="control-label">
          직함
        <span class="help-inline"></span>
      </label>
    <input type="text" id="position" name="position" value="" class="form-control">
      <span class="help-block"></span>
    </div>

    <div class="form-group cust-form has-feedback ">
      <label for="duty" class="control-label">
          직무
        <span class="help-inline"></span>
      </label>
    <input type="text" id="duty" name="duty" value="" class="form-control">
      <span class="help-block"></span>
    </div>

    <div class="form-group cust-form has-feedback ">
      <label for="officePhone" class="control-label">
          사무실전화번호
        <span class="help-inline"></span>
      </label>
    <input type="text" id="officePhone" name="officePhone" value="" class="form-control">
      <span class="help-block"></span>
    </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="hr-line-dashed"></div>
                  <div class="text-right">
                    <button type="submit" class="btn btn-primary"><i class="fa fa-save"></i><span class="hidden-xs">&nbsp;저장</span></button>
<a class="btn btn-success" role="button" onclick="return traineeBtn_isConfirmed();" id="traineeBtn" )=""><i class="fa fa-exchange"></i><span class="hidden-xs">&nbsp;채용예정자 전환</span></a>

<script type="text/javascript">
        function traineeBtn_isConfirmed(){

            console.log("채용예정자로 전환하시겠습니까?");

            swal({
                title: '채용예정자로 전환하시겠습니까?',
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#DD6B55",
                confirmButtonText: '예',
                cancelButtonText: '아니오',
                closeOnConfirm: false,
                closeOnCancel: true},
            function (isConfirm) {
                console.log(isConfirm);
                if (isConfirm) {
                    location.href = '/member/changetrainee/80339';
                }
            });
        }
</script>
                    
                    

<a class="btn btn-info" role="button" onclick="return enrollBtn_isConfirmed();" id="enrollBtn" )=""><i class="fa fa-sign-out"></i><span class="hidden-xs">&nbsp;회원탈퇴</span></a>

<script type="text/javascript">
        function enrollBtn_isConfirmed(){

            console.log("회원탈퇴하시겠습니까?");

            swal({
                title: '회원탈퇴하시겠습니까?',
                type: "warning",
                showCancelButton: true,
                confirmButtonColor: "#DD6B55",
                confirmButtonText: '예',
                cancelButtonText: '아니오',
                closeOnConfirm: false,
                closeOnCancel: true},
            function (isConfirm) {
                console.log(isConfirm);
                if (isConfirm) {
                    location.href = '/member/withdrawal/80339';
                }
            });
        }
</script>
                  </div>

              </form></div>
            </div>
          </div>
        </div>
        

<script>
    $(function(){
      $.validator.addMethod("regex", function(value, element, regexpr) {          
          return regexpr.test(value);
      });
      
        $("#updateForm").validate({
          ignore: [],
            rules: {
              userId: {
                required: true
              },
              birthDate: {
                required: true
                },
                zipCode: {
                  required: true
                },
                address: {
                  required: true
                },
                detailAddress: {
                  required: true
                },
                name: {
                    required: true
                },
                newPassword: {
                    required: true,
                    regex: /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,16}$/
                },
                confirmPassword: {
                    required: true,
                    equalTo: "#newPassword" 
                },
                cellPhone: {
                    required: true,
                    regex: /^((01[1|6|7|8|9])[1-9]+[0-9]{6,7})|(010[1-9][0-9]{7})$/
                },
                email: {
                    email: true
                },
                ssn: {
                  number: true
                },
                bankAccount: {
                  number: true
                }
            },
            messages: {
              userId: {
                required: "필수 입력 항목입니다."
              },
              birthDate: {
                required: "필수 입력 항목입니다."
                },
                zipCode: {
                  required: "필수 입력 항목입니다."
                },
                address: {
                  required: "필수 입력 항목입니다."
                },
                detailAddress: {
                  required: "필수 입력 항목입니다."
                },
                name: {
                    required: "필수 입력 항목입니다."
                },
                newPassword: {
                    required: "필수 입력 항목입니다.",
                    regex: "8~16자 숫자,소문자, 대문자를 포함 해야 합니다."
                },
                confirmPassword: {
                    required: "필수 입력 항목입니다.",
                    equalTo: "비밀번호가 일치하지 않습니다."
                },
                cellPhone: {
                    required: "필수 입력 항목입니다.",
                    regex: "휴대전화 번호를 다시 확인해 주세요."
                },
                email: {
                    email: "이메일 주소를 다시 확인해 주세요."
                },
                ssn:{
                  number: "숫자만 입력 가능합니다."
                },
                bankAccount:{
                  number: "숫자만 입력 가능합니다."
                }
            },
            invalidHandler: function(event, validator){
              var errorEl = validator.findLastActive() || validator.errorList.length && validator.errorList[0].element;
              if(errorEl){
                $(errorEl).closest('.panel-collapse').collapse('show');
              }
            },
            submitHandler: function(form) {
                form.submit();
            },
            errorPlacement: function(error, element) {
                $( element )
                        .closest( "form" )
                        .find( "label[for='" + element.attr( "id" ) + "']" )
                        .append( error );
            },
            errorElement: "span",
        });


    });
  </script>
        


      
            </div>
            </div>
<!-- <div class="panel panel-default" layout:fragment="content1">
  <table class="table">
    <tr>
      <th>과목명</th>
      <th>연간횟수</th>
      <th>훈련시간</th>
    </tr>
    <tr id="course" th:each="CourseInfo,i:${CourseList}">
      <td>
        <a th:href="@{'/courseInfo/'+${CourseInfo[3]}+'/'+${CourseInfo[4]}}" th:text="${CourseInfo[0]}"></a>
      </td>
      <td th:text="${CourseInfo[1]}"/>
      <td th:text="${CourseInfo[2]}"/>
    </tr>
  </table>
 </div>  -->
</body>
</html>